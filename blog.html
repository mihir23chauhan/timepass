{% extends "layout.html" %}
{% block body %}

<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="text/stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<link href="static/css/styles.css">
    <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="/" id ="Home" >Home</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
              aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars" ></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" id ="About" href="/about" >About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id = "Projects" href="/projects" >Projects</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id= "Blogs" href="/blogs" >Blogs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id = "Contact" href="/contact" >Contact</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="/logout" >Logout</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/login" >Login</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
<!-- / nav bar -->
<!-- for spacing so that page starts after nav bar -->
<div>
  <br>
  <br>
  <br>
</div>
<!-- / of spacing -->
<font>
  <legend class = "border-bottom mb-4">{{ legend }}</legend>
  <div class = "form-group">
      {{ form.title.label(class = "form-control-label")}}
      {% if form.title.errors %}
          {{ form.title(class = "form-control form-control-lg is-invalid")}}
          <div class = "invalid-feedback">
              {% for error in form.title.errors %}
                  <span>{{ error }}</span>
              {% endfor%}
          </div>
      {% else %}
          {{ form.title(class = "form-control form-control-lg")}}
      {% endif %}
  </div>
  <div class = "form-group">
    {{ form.description.label(class = "form-control-label")}}
    {% if form.description.errors %}
        {{ form.description(class = "form-control form-control-lg is-invalid")}}
        <div class = "invalid-feedback">
            {% for error in form.description.errors %}
                <span>{{ error }}</span>
            {% endfor%}
        </div>
    {% else %}
        {{ form.description(class = "form-control form-control-lg")}}
    {% endif %}
</div>
<div class="form-group">
  {{ form.content.label(class = "form-control-label")}}
  <div id="toolbar"></div>
  <div id="editor"></div>
  <div>
      <br>
      <button type="submit" class="btn btn-primary" id="submitBlog">Submit</button>
      <button type="view" class="btn btn-primary" id="viewBlog">View</button>
  </div>
</div>
</font>




<!-- <div id="form-container" class="container col-md-9 col-lg-10 col-xs-8">
  <form >
    <div class="row">
      <div class="col-md-9 col-lg-10 col-xs-8">
        <div class="form-group">
          <label for="display_name">Project Title</label>
          <input class="form-control" name="display_name" type="text" >
        </div>
        <div class="form-group">
          <label for="location">Feature Image</label>
          <br>
          <input type='file' name="image" id="imgInp" />
        </div>
      </div>
    </div>
    <div class="row form-group">
      <label for="about">About the project</label>
      <input name="about" type="hidden">
      <div id="toolbar"></div>
      <div id="editor"></div>
    </div> -->
    
    <!-- <div id="row form-group content-container">
      <label for="about">About the project</label>
      <input name="about" type="hidden">
      <div id="toolbar-container">
        <button class="ql-bold" data-toggle="tooltip" data-placement="bottom" title="Bold"></button>
        <button class="ql-italic" data-toggle="tooltip" data-placement="bottom" title="Italic text <cmd+i>"></button>
        <button class="ql-underline" data-toggle="tooltip" data-placement="bottom" title="Underline"></button>
        <button class="ql-blockquote" data-toggle="tooltip" data-placement="bottom" title="Block quote"></button>
        <button class="ql-code-block" data-toggle="tooltip" data-placement="bottom" title="Code block"></button>
        <button class="ql-strike" data-toggle="tooltip" data-placement="bottom" title="Strike text"></button>
        <button class="ql-script" value="sub" data-toggle="tooltip" data-placement="bottom" title="Subscript text"></button>
        <button class="ql-script" value="super" data-toggle="tooltip" data-placement="bottom" title="Superscript text"></button>
        <button class="ql-link" data-toggle="tooltip" data-placement="bottom" title="Add link"></button>
        <button class="ql-image" data-toggle="tooltip" data-placement="bottom" title="Add image"></button>
        <select class="ql-align" data-toggle="tooltip" data-placement="bottom" title="Align text"></select>
        <button class="ql-list" value="ordered" data-toggle="tooltip" data-placement="bottom" title="Add ordered list"></button>
        <button class="ql-list" value="bullet" data-toggle="tooltip" data-placement="bottom" title="Add bullet list"></button>
        <button class="ql-header" value="1" data-toggle="tooltip" data-placement="bottom" title="Header text"></button>
        <button class="ql-header" value="2" data-toggle="tooltip" data-placement="bottom" title="Header text"></button>
        <select class="ql-size" title="Size" data-toggle="tooltip" data-placement="bottom">
          <option value="small"></option> -->
          <!-- Note a missing, thus falsy value, is used to reset to default -->
          <!-- <option selected ></option>
          <option value="large"></option>
          <option value="huge"></option>
        </select>
        <button class="ql-clean" data-toggle="tooltip" data-placement="bottom" title="Reset"></button>
        
      </div>
      <div id="editor-container" style="height: 25cm;"></div>
    </div> -->
    <!-- <div>
      <br>
      <button type="submit" class="btn btn-primary" id="submitBlog">Submit</button>
    </div>
  </form>
  
  
</div> -->


<script>
  var toolbarOptions = [
    ['bold', 'italic', 'underline', 'strike'],        // toggled buttons
    ['blockquote', 'code-block'],

    [{ 'header': 1 }, { 'header': 2 }, { 'header': 3 }, { 'header': 4 }],               // custom button values
    [{ 'list': 'ordered'}, { 'list': 'bullet' }],
    [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript
    [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent
    [{ 'direction': 'rtl' }],                         // text direction

    [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown
    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],

    [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme
    [{ 'font': [] }],
    [{ 'align': [] }],
    ['link', 'image'],

    ['clean']                                         // remove formatting button
  ];

  var quill = new Quill('#editor', {
    modules: {
      toolbar: toolbarOptions
    },
    theme: 'snow',
    //placeholder: 'write about your project'
  });

//   $(document).ready(function() {
//   var quill = new Quill('#editor-container', {
//     modules: {
//       toolbar: '#toolbar-container'
//     },
//     placeholder: 'Compose an epic...',
//     theme: 'snow'
//   });
  
//   // Enable all tooltips
//   $('[data-toggle="tooltip"]').tooltip();
  
//   // Can control programmatically too
//   $('.ql-italic').mouseover();
//   setTimeout(function() {
//     $('.ql-italic').mouseout();
//   }, 2500);
// });


  // var form = document.querySelector('form');
  // form.onsubmit = function() {
  //   // Populate hidden form on submit
  //   var about = document.querySelector('input[name=about]');
  //   about.value = JSON.stringify(quill.getContents());
    
  //   console.log("Submitted", $(form).serialize(), $(form).serializeArray());
    
  //   // No back end to actually submit to!
  //   alert('Open the console to see the submit data!')
  //   return false;
  // };

  //   function readURL(input) {
  //     if (input.files && input.files[0]) {
  //         var reader = new FileReader();

  //         reader.onload = function (e) {
  //             $('#blah').attr('src', e.target.result);
  //         }

  //         reader.readAsDataURL(input.files[0]);
  //     }
  // }
  
  $("#submitBlog").click(function () {
    window.delta = quill.getContents();
    window.alert("Submitted!");
  });

  $('#viewBlog').click(function(){
    window.delta = quill.getContents();
    
    $('#view').html(window.delta);
  });
  
  $("#imgInp").change(function(){
      readURL(this);
  });

</script>


<!-- / input title -->
{% endblock %}
